#### [back](../../README.md) &nbsp;&nbsp; | &nbsp;&nbsp; write by [sangcho][sangcho]

# 5. ì¢€ ë” ë°œì „ì‹œí‚¤ê¸°

> ì´ ê¸€ì€ í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸ í”„ë¡œê·¸ë˜ë°ì„ ì°¸ê³ í•˜ì—¬ ê¸°ë¡í•˜ì˜€ìŠµë‹ˆë‹¤.
<br>

lodashì˜ ì§€ì—°í‰ê°€ë¥¼ í†µí•´ ë°°ì—´ í¬ê¸°ê°€ 200ì´ìƒì¼ë•Œë§Œ ë™ì‘ë˜ì–´ ì‹¤ìš©ì„±ì´ ë–¨ì–´ì§. ë˜í•œ ì²´ì¸ ë°©ì‹ì—ì„œë§Œ ë™ì‘ë˜ê¸° ë•Œë¬¸ì— lodashì˜ ì¼ë°˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì„±ëŠ¥ ê°œì„ ì˜ ì´ì ì„ ëˆ„ë¦´ìˆ˜ ì—†ë‹¤.

ê·¸ëŸ¼ ê°œë°œìê°€ ì„ íƒì ìœ¼ë¡œ ì„±ëŠ¥ ê°œì„  ìƒí™©ì„ ì„ íƒí•´ë³´ì.

## 1. ì¤‘ê°„ì— ë‚˜ê°€ê¸°

```jsx
// _.filter 
function bloop(new_data, body, stopper, is_reduce) {
  return function(data, iter_predi, opt1) {
    iter_predi = iter_predi || _.idtt;
    var result = new_data(data);
    var memo = is_reduce ? opt1 : undefined;
    var limiter = is_reduce ? undefined : opt1; // (1) reduceê°€ ì•„ë‹ ë•Œë§Œ opt1 ì‚¬ìš©
    var keys = isArrayLike(data) ? null : _.keys(data);
    for (var i = 0, len = (keys || data).length; i < len; i++) {
      var key = keys ? keys[i] : i;
      memo = is_reduce ?
        iter_predi(memo, data[key], key, data) :
        iter_predi(data[key], key, data);
      if (!stopper) body(memo, result, data[key], key);
      else if (stopper(memo)) return body(memo, result, data[key], key);
      if (limiter && limiter == result.length) break;
      // (2) limiterê°€ ìˆê³  result.lengthì™€ ê°™ë‹¤ë©´ break
    }
    return is_reduce ? memo : result;
  }
}
_.filter = bloop(_.array, _.if(_.idtt, _.rester(_.push)));

_.filter([1, 2, 3, 4, 5, 6, 7, 8], function() {
  return true;
});
// [1, 2, 3, 4, 5, 6, 7, 8]

_.filter([1, 2, 3, 4, 5, 6, 7, 8], function() {
  return true;
}, 4); // limiter => 4
// [1, 2, 3, 4]

// _.map
_.map = bloop(_.array, _.push_to);

_.map([1, 2, 3, 4, 5, 6], function(v) {
  return v + v;
}, 3); // limiter => 3
// [2, 4, 6]
```

## 2. ì½”ë“œ ì–‘ê³¼ ì„±ëŠ¥

forë¬¸ ì•ˆì— ì‚¬ìš©ë˜ëŠ” ifë¬¸ì„ forë¬¸ ë°–ìœ¼ë¡œ êº¼ë‚´ ë” íš¨ìœ¨ì ì¸ ë™ì‘ì„ í•˜ë„ë¡ í•¨.(forë¬¸ ì•ˆì— ifë¬¸ì€ êº¼ë‚¼ìˆ˜ ìˆìœ¼ë©´ êº¼ë‚´ëŠ” ê²ƒì´ ì¢‹ë‹¤.)

```jsx
function bloop(new_data, body, stopper, is_reduce) {
  return function(data, iter_predi, opt1) {
    iter_predi = iter_predi || _.idtt;
    var result = new_data(data);
    var memo = is_reduce ? opt1 : undefined;
    var limiter = is_reduce ? undefined : opt1;
    var keys = isArrayLike(data) ? null : _.keys(data);

    if (is_reduce) { // reduce
      for (var i = 0, len = (keys || data).length; i < len; i++) {
        var key = keys ? keys[i] : i;
        memo = iter_predi(memo, data[key], key, data);
      }
      return memo;
    }
    if (stopper) { // find, some, every, findIndex, findKey
      for (var i = 0, len = (keys || data).length; i < len; i++) {
        var key = keys ? keys[i] : i;
        var memo = iter_predi(data[key], key, data);
        if (stopper(memo)) return body(memo, result, data[key], key);
      }
    } else if (limiter) { // each, map, filter, rejectì„ í•˜ë©´ì„œ limitì´ ìˆì„ ë•Œ
      for (var i = 0, len = (keys || data).length; i < len; i++) {
        var key = keys ? keys[i] : i;
        body(iter_predi(data[key], key, data), result, data[key]);
        if (limiter == result.length) break;
      }
    } else { // each, map, filter, reject
      for (var i = 0, len = (keys || data).length; i < len; i++) {
        var key = keys ? keys[i] : i;
        body(iter_predi(data[key], key, data), result, data[key]);
      }
    }
    return result;
  }
}
```

```jsx
// í•µì‹¬ ì½”ë“œ ëª¨ìŒ
function bloop(new_data, body, stopper, is_reduce) {
  return function(data, iter_predi, opt1) {
    iter_predi = iter_predi || _.idtt;
    var result = new_data(data);
    var memo = is_reduce ? opt1 : undefined;
    var limiter = is_reduce ? undefined : opt1;
    var keys = isArrayLike(data) ? null : _.keys(data);
    var i = -1, len = (keys || data).length; // ì´ ì½”ë“œê°€ ìœ„ë¡œ ì˜¬ë¼ì™€ ì•„ë˜ê°€ ë” ê°„ê²°í•´ì¡Œë‹¤.

    if (is_reduce) {
      while (++i < len) {
        var key = keys ? keys[i] : i;
        memo = iter_predi(memo, data[key], key, data);
        if (limiter && limiter(memo, data[key], key, data)) break;
      }
      return memo;
    }
    if (stopper) {
      while (++i < len) {
        var key = keys ? keys[i] : i;
        var memo = iter_predi(data[key], key, data);
        if (stopper(memo)) return body(memo, result, data[key], key);
      }
    } else if (limiter) {
      while (++i < len) {
        var key = keys ? keys[i] : i;
        body(iter_predi(data[key], key, data), result, data[key]);
        if (limiter == result.length) break;
      }
    } else {
      while (++i < len) {
        var key = keys ? keys[i] : i;
        body(iter_predi(data[key], key, data), result, data[key]);
      }
    }
    return result;
  }
}
_.each = bloop(_.identity, _.noop);
_.map = bloop(_.array, _.push_to);
_.filter = bloop(_.array, function(b, r, v) { if (b) r.push(v); });
_.reject = bloop(_.array, function(b, r, v) { if (!b) r.push(v); });
_.find = bloop(_.noop, _.rester(_.idtt, 2), _.idtt);
_.findIndex = bloop(_.constant(-1), _.rester(_.idtt, 3), _.idtt);
_.findKey = bloop(_.noop, _.rester(_.idtt, 3), _.idtt);
_.some = bloop(_.constant(false), _.constant(true), _.idtt);
_.every = bloop(_.constant(true), _.constant(false), _.not);
_.reduce = bloop(_.noop, _.noop, undefined, true);
```

## 3. ì •ë¦¬

ì§€ê¸ˆê¹Œì§€ underscore.jsì˜ ì£¼ìš”í•¨ìˆ˜ë“¤ì„ ì–´ê±°ì§€ë¡œ(?) ë§Œë“¤ì—ˆë‹¤. 

1. ì—°ì‚°ìë‚˜ ê°’ì„ í•¨ìˆ˜ë¡œ ëŒ€ì²´í•˜ëŠ” ë²•
2. bloop ê°™ì´ ë³µì¡í•œ ë¡œì§ ì‚¬ì´ì— í•¨ìˆ˜ë¥¼ ë¼ì›Œ ë„£ëŠ” ë°©ë²•
3. í•¨ìˆ˜ë¡œ ì¶”ìƒí™”í•˜ëŠ” ë°©ë²•
4. í•¨ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ë°©ë²•

ì´ ëª¨ë“  ê²ƒì€ `**í•¨ìˆ˜ì  ì•„ì´ë””ì–´ë¥¼ í™•ì¸**`í•´ë³´ê¸° ìœ„í•¨ì´ì—ˆë˜ê²ƒ!!ğŸ˜‰

ê°œë°œìì—ê²Œ ì„±ëŠ¥ê³¼ ì•„ë¦„ë‹¤ìš´ ì½”ë“œë¼ëŠ” â€˜ë‘ ë§ˆë¦¬ í† ë¼ ì¡ê¸°â€™ëŠ” ìˆ™ëª….

<strong><ì°¸ê³ ìë£Œ></strong>

[ì±…] [#í•¨ìˆ˜í˜•ìë°”ìŠ¤í¬ë¦½íŠ¸í”„ë¡œê·¸ë˜ë°][í•¨ìˆ˜í˜•ìë°”ìŠ¤í¬ë¦½íŠ¸í”„ë¡œê·¸ë˜ë°] - ìœ ì¸ë™ ì§€ìŒ -

---

##### í•¨ìˆ˜í˜• ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìœ„í•œ ê¸°ì´ˆ end

[í•¨ìˆ˜í˜•ìë°”ìŠ¤í¬ë¦½íŠ¸í”„ë¡œê·¸ë˜ë°]: https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=123715872
[sangcho]: https://github.com/SangchoKim
[taeHyen]: https://github.com/rlaxogus0517
[kangHyen]: https://github.com/bebekh1216
[sumin]: https://github.com/ttumzzi
